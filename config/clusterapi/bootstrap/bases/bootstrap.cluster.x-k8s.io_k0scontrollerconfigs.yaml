---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    cluster.x-k8s.io/provider: bootstrap-k0smotron
    cluster.x-k8s.io/v1beta1: v1beta1
  name: k0scontrollerconfigs.bootstrap.cluster.x-k8s.io
spec:
  group: bootstrap.cluster.x-k8s.io
  names:
    kind: K0sControllerConfig
    listKind: K0sControllerConfigList
    plural: k0scontrollerconfigs
    singular: k0scontrollerconfig
  scope: Namespaced
  versions:
  - name: v1beta1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            properties:
              args:
                description: |-
                  Args specifies additional arguments to be passed to the k0s worker node.
                  See: https://docs.k0sproject.io/stable/worker-node-config/ for configuration details
                items:
                  type: string
                type: array
              downloadURL:
                description: |-
                  DownloadURL specifies the URL of the k0s binary.
                  Specifying DownloadURL overrides the Version field, and the downloaded version of k0s is used.
                type: string
              files:
                description: Files specifies additional files associated with the
                  newly created user.
                items:
                  properties:
                    content:
                      type: string
                    path:
                      type: string
                    permissions:
                      type: string
                  type: object
                type: array
              k0s:
                description: |-
                  K0s defines the k0s configuration. Note, that some fields will be overwritten by k0smotron.
                  If empty, the default k0s configuration is used. For details, see https://docs.k0sproject.io/stable/configuration/.
                type: object
                x-kubernetes-preserve-unknown-fields: true
              postStartCommands:
                description: PostStartCommands specifies the commands that should
                  be executed after the k0s worker node start.
                items:
                  type: string
                type: array
              preInstalledK0s:
                description: PreInstalledK0s specifies whether the k0s binary is pre-installed
                  on the node.
                type: boolean
              preStartCommands:
                description: PreStartCommands specifies the commands that should be
                  executed before the k0s worker node start.
                items:
                  type: string
                type: array
              tunneling:
                description: Tunneling defines the tunneling configuration of the
                  cluster.
                properties:
                  enabled:
                    default: false
                    description: Enabled specifies whether tunneling is enabled.
                    type: boolean
                  mode:
                    default: tunnel
                    description: |-
                      Mode defines the tunneling mode.
                      If empty, k0smotron uses the default mode.
                    enum:
                    - tunnel
                    - proxy
                    type: string
                  serverAddress:
                    description: |-
                      ServerAddress defines the address of the tunneling server.
                      If empty, k0smotron tries to detect the address of the worker node.
                    type: string
                  serverNodePort:
                    default: 31700
                    description: |-
                      ServerNodePort defines the NodePort to be used as the server port of the tunneling server.
                      If empty, k0smotron uses the default port.
                    format: int32
                    type: integer
                  tunnelingNodePort:
                    default: 31443
                    description: |-
                      TunnelingNodePort defines the NodePort to be used as the tunneling port.
                      If empty, k0smotron uses the default port.
                    format: int32
                    type: integer
                type: object
              version:
                description: |-
                  Version defines the version of k0s to be deployed. If the parameter is not set, k0smotron uses
                  the Version field of the Machine object. If the Version field is empty, the latest version of k0s is used.
                  Make sure the version is compatible with the k0s version running on the control plane.
                  For reference, see the Kubernetes version skew policy: https://kubernetes.io/docs/setup/release/version-skew-policy/.
                type: string
            type: object
          status:
            properties:
              dataSecretName:
                description: DataSecretName is the name of the secret that stores
                  the bootstrap data script.
                type: string
              ready:
                description: Ready indicates whether the Bootstrapdata field is ready
                  to be consumed.
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
